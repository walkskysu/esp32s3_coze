# MIT license; Copyright (c) 2025 Walksky Su (walksky@gmail.com)

from machine import Pin, I2C
import ssd1306
import framebuf

# 初始化I2C和OLED
i2c = I2C(0, scl=Pin(42), sda=Pin(41), freq=400000)
oled = ssd1306.SSD1306_I2C(128, 32, i2c)

# 清空屏幕
oled.fill(0)

# 自定义中文点阵数据（16x16像素）
listen_words = bytearray([
    0x00, 0x20, 0x00, 0x08, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xff, 0x20, 0x00, 0x1c, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x24, 0x20, 0x79, 0xe0, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x24, 0x50, 0x49, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x3c, 0x50, 0x49, 0x00, 0x3f, 0xf8, 0x00, 0x00, 0x00, 0x00,
    0x24, 0x88, 0x49, 0x00, 0x21, 0x08, 0x00, 0x00, 0x00, 0x00,
    0x25, 0x44, 0x49, 0xfe, 0x21, 0x08, 0x00, 0x00, 0x00, 0x00,
    0x3e, 0x22, 0x49, 0x10, 0x21, 0x08, 0x00, 0x00, 0x00, 0x00,
    0x24, 0x20, 0x49, 0x10, 0x21, 0x08, 0x00, 0x00, 0x00, 0x00,
    0x24, 0xf8, 0x49, 0x10, 0x21, 0x08, 0x00, 0x00, 0x00, 0x00,
    0x2e, 0x08, 0x79, 0x10, 0x3f, 0xf8, 0x00, 0x00, 0x00, 0x00,
    0xf4, 0x08, 0x49, 0x10, 0x21, 0x08, 0x00, 0x00, 0x00, 0x00,
    0x44, 0x10, 0x01, 0x10, 0x01, 0x00, 0x60, 0x00, 0x60, 0x00,
    0x04, 0x10, 0x02, 0x10, 0x01, 0x00, 0x60, 0x00, 0x60, 0x00,
    0x04, 0x20, 0x02, 0x10, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x04, 0x20, 0x04, 0x10, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00
])  # "耹听中.."字

talk_words = bytearray([
    0x02, 0x08, 0x00, 0x08, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x21, 0x08, 0x20, 0x3c, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x11, 0x10, 0x11, 0xe0, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x10, 0x20, 0x10, 0x20, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x03, 0xf8, 0x00, 0x20, 0x3f, 0xf8, 0x00, 0x00, 0x00, 0x00,
    0x02, 0x08, 0x03, 0xfe, 0x21, 0x08, 0x00, 0x00, 0x00, 0x00,
    0xf2, 0x08, 0xf0, 0x20, 0x21, 0x08, 0x00, 0x00, 0x00, 0x00,
    0x12, 0x08, 0x10, 0x20, 0x21, 0x08, 0x00, 0x00, 0x00, 0x00,
    0x13, 0xf8, 0x10, 0x20, 0x21, 0x08, 0x00, 0x00, 0x00, 0x00,
    0x10, 0xa0, 0x11, 0xfc, 0x21, 0x08, 0x00, 0x00, 0x00, 0x00,
    0x10, 0xa0, 0x11, 0x04, 0x3f, 0xf8, 0x00, 0x00, 0x00, 0x00,
    0x15, 0x20, 0x11, 0x04, 0x21, 0x08, 0x00, 0x00, 0x00, 0x00,
    0x19, 0x22, 0x15, 0x04, 0x01, 0x00, 0x60, 0x00, 0x60, 0x00,
    0x12, 0x22, 0x19, 0x04, 0x01, 0x00, 0x60, 0x00, 0x60, 0x00,
    0x04, 0x1e, 0x11, 0xfc, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x08, 0x00, 0x01, 0x04, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00
])  # "说话中.."字

# 创建FrameBuffer对象
listen_fb = framebuf.FrameBuffer(listen_words, 80, 16, framebuf.MONO_HLSB)
talk_fb = framebuf.FrameBuffer(talk_words, 80, 16, framebuf.MONO_HLSB)
# 绘制文字到屏幕

oled.blit(talk_fb, 16, 8)  # X:16 Y:8

oled.show()
